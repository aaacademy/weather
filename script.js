const searchCity=document.getElementById("search-city"),locationEl=document.getElementById("location"),descriptionEl=document.getElementById("description"),iconWeatherEl=document.getElementById("weather-icon"),mainTempEl=document.getElementById("main-temp"),weatherNameEl=document.getElementById("weather-name"),feelsLikeEl=document.getElementById("feels-like"),humidityEl=document.getElementById("humidity"),visibilityEl=document.getElementById("visibility"),windSpeedEl=document.getElementById("wind-speed"),windDirectionEl=document.getElementById("wind-direction"),sunRiseTimeEl=document.getElementById("sunrise-time"),sunSetTimeEl=document.getElementById("sunset-time"),convertTime=(e,t)=>{return new Date(1e3*(e+t)).toISOString().match(/(\d{2}:\d{2})/)},getData=async(e="bogor")=>{e=`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric&appid=31ee1676a03c5d1066ac1d5923d1ba10`;try{const i=await fetch(e);var t=await i.json(),n=document.querySelector("link[rel~='icon']");n||((n=document.createElement("link")).rel="icon",document.getElementsByTagName("head")[0].appendChild(n)),n.href=`icons/${t.weather[0].icon}.svg`,locationEl.innerText=`${t.name}, ${t.sys.country}`,descriptionEl.innerText=t.weather[0].description,iconWeatherEl.src=`icons/${t.weather[0].icon}.svg`,mainTempEl.innerText=Math.round(t.main.temp)+"°C",weatherNameEl.innerHTML=t.weather[0].main,feelsLikeEl.innerText="Feels like "+Math.round(t.main.feels_like)+"°C",humidityEl.innerText=t.main.humidity,visibilityEl.innerText=(t.visibility/1e3).toPrecision(2),windSpeedEl.innerText=t.wind.speed,windDirectionEl.innerText=t.wind.deg,sunRiseTimeEl.innerText=`${parseInt(convertTime(t.sys.sunrise,t.timezone)[0].split(":")[0])}:${convertTime(t.sys.sunrise,t.timezone)[0].split(":")[1]}`,sunSetTimeEl.innerText=convertTime(t.sys.sunset,t.timezone)[0],console.log(t)}catch(e){alert("city not found")}};searchCity.addEventListener("keydown",e=>{13===e.keyCode&&getData(searchCity.value)}),document.addEventListener("DOMContentLoaded",e=>{getData()});
